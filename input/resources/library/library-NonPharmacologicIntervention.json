{
  "resourceType": "Library",
  "id": "library-NonPharmacologicIntervention",
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "cqf-tooling"
    }
  } ],
  "url": "http://fhir.org/guides/ohsu/htnu18ig/Library/NonPharmacologicIntervention",
  "version": "0.1",
  "name": "NonPharmacologicIntervention",
  "relatedArtifact": [ {
    "type": "depends-on",
    "resource": "http://hl7.org/fhir/Library/FHIR-ModelInfo|4.0.1"
  }, {
    "type": "depends-on",
    "resource": "http://hl7.org/fhir/Library/FHIRHelpers|4.0.1"
  }, {
    "type": "depends-on",
    "resource": "http://fhir.org/guides/ohsu/htnu18ig/Library/OHSUHTNCommon|0.1"
  }, {
    "type": "depends-on",
    "resource": "http://terminology.hl7.org/CodeSystem/v3-ActCode"
  }, {
    "type": "depends-on",
    "resource": "http://loinc.org"
  }, {
    "type": "depends-on",
    "resource": "http://terminology.hl7.org/CodeSystem/goal-achievement"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.3157.4012"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.10"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.2012"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1104.2"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.2.1045"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.509"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1116.420"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1195.111"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.124"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.195.12.1003"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1146.1330"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.2.422"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1490"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.106.11.1030"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.378"
  }, {
    "type": "depends-on",
    "resource": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.2.590"
  } ],
  "parameter": [ {
    "name": "Patient",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Patient"
  }, {
    "name": "Info",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Warning",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Critical",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Errors",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Any"
  }, {
    "name": "Patient Name",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Condition Indicating Preexisting Hypertension",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Condition"
  }, {
    "name": "Meets Inclusion Criteria",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Patient Under Age 18",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Patient Over Age 80",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Condition Indicating End Stage Renal Disease",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Condition"
  }, {
    "name": "Condition Indicating Pregnancy",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Condition"
  }, {
    "name": "Meets Exclusion Criteria",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "In Population",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "BP Goal Recommendation",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "BP Goal Rationale",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Smoking Recommendation",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Smoking Rationale",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "BMI Recommendation",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "BMI Rationale",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Alcohol Recommendation",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Alcohol Rationale",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Dietary Counseling Recommendation",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Dietary Counseling Rationale",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Smoking, Drinking, BMI Not Increased Recommendation",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Smoking, Drinking, BMI Not Increased Rationale",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Qualifying Blood Pressure Goals",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Goal"
  }, {
    "name": "Most Recently Established Blood Pressure Goal",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Goal"
  }, {
    "name": "BP Goal Demonstrating Patient Improvement",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Goal"
  }, {
    "name": "Patient at BP Goal",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Patient on Track of Goal Recommendation",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Patient on Track of Goal Rationale",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Indicator Status",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Exclusion Reason",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "string"
  }, {
    "name": "Patient does not have a BP Goal",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Observations Indicating Patient is a Smoker",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Observation"
  }, {
    "name": "Most Recent Observation of Patient Smoking Status",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Observation"
  }, {
    "name": "Patient is Currently a Smoker",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Observations Specifying Patient BMI",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Observation"
  }, {
    "name": "Most Recent Patient BMI",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Observation"
  }, {
    "name": "Patient BMI is Greater than 25 kg/m2",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Observations Measuring Amount of Alcoholic Drinks Patient has per Drinking Day",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Observation"
  }, {
    "name": "Most Recent Patient Drinking Observation",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Observation"
  }, {
    "name": "Heavy Daily Drinker",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "decimal"
  }, {
    "name": "Patient is a Heavy Alcoholic Drinker",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Counseling for Non-Pharmacological Interventions",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Procedure"
  }, {
    "name": "Counseling from Last Visit",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "Reference"
  }, {
    "name": "Counseling Smoking Observation",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Observation"
  }, {
    "name": "Counseling Drinking Observation",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Observation"
  }, {
    "name": "Counseling BMI Observation",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Observation"
  }, {
    "name": "Patient Smoking Increased Since Last Visit",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Patient Drinking Increased Since Last Visit",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Patient BMI Increased Since Last Visit",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Patient Has Not Increased in Smoking, BMI, Or Drinking Since Last Counseling",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Patient is Currently a Smoker Action Path",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Patient BMI is Greater than 25 kg/m2 Action Path",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Patient is a Heavy Alcoholic Drinker Action Path",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Patient is in Need of Dietary Counseling Action Path",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "Patient Reminder Recommendations Action Path",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "boolean"
  }, {
    "name": "TEST Patient Age",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "integer"
  }, {
    "name": "TEST Patient BMI Resources",
    "use": "out",
    "min": 0,
    "max": "*",
    "type": "id"
  }, {
    "name": "TEST Most Recent Patient BMI",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Any"
  } ],
  "dataRequirement": [ {
    "type": "Condition",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Condition" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.3157.4012"
    } ]
  }, {
    "type": "Condition",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Condition" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.10"
    } ]
  }, {
    "type": "Condition",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Condition" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.2.590"
    } ]
  }, {
    "type": "Condition",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Condition" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.378"
    } ]
  }, {
    "type": "Goal",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Goal" ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1146.1330"
    } ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.600.1.1490"
    } ]
  }, {
    "type": "Observation",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Observation" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.106.11.1030"
    } ]
  }, {
    "type": "Procedure",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Procedure" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.526.3.509"
    } ]
  }, {
    "type": "Procedure",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Procedure" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1116.420"
    } ]
  }, {
    "type": "Procedure",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Procedure" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1195.111"
    } ]
  }, {
    "type": "Procedure",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Procedure" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113762.1.4.1032.124"
    } ]
  }, {
    "type": "Procedure",
    "profile": [ "http://hl7.org/fhir/StructureDefinition/Procedure" ],
    "codeFilter": [ {
      "path": "code",
      "valueSet": "http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.195.12.1003"
    } ]
  } ],
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBOb25QaGFybWFjb2xvZ2ljSW50ZXJ2ZW50aW9uIHZlcnNpb24gJzAuMScKCnVzaW5nIEZISVIgdmVyc2lvbiAnNC4wLjEnCgppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzQuMC4xJyBjYWxsZWQgRkhJUkhlbHBlcnMKaW5jbHVkZSBPSFNVSFROQ29tbW9uIHZlcnNpb24gJzAuMScgY2FsbGVkIENvbW1vbgoKY29kZXN5c3RlbSAidjMgQ29kZSBTeXN0ZW0gQWN0Q29kZSI6ICdodHRwOi8vdGVybWlub2xvZ3kuaGw3Lm9yZy9Db2RlU3lzdGVtL3YzLUFjdENvZGUnCmNvZGVzeXN0ZW0gIkxPSU5DIjogJ2h0dHA6Ly9sb2luYy5vcmcnCmNvZGVzeXN0ZW0gIkdvYWwgYWNoaWV2ZW1lbnQgc3RhdHVzIjogJ2h0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL0NvZGVTeXN0ZW0vZ29hbC1hY2hpZXZlbWVudCcKCi8qIEluY2x1c2lvbiAqLwovLyBIWVBFUlRFTlNJT04gRElBR05PU0lTCnZhbHVlc2V0ICJIeXBlcnRlbnNpb24iOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuMzE1Ny40MDEyJwp2YWx1ZXNldCAiTm9uIGVzc2VudGlhbCBIeXBlcnRlbnNpb24gU05PTUVEQ1QiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMDMyLjEwJwovLyBCTE9PRCBQUkVTU1VSRQp2YWx1ZXNldCAiQmxvb2QgUHJlc3N1cmUgTWVhc3VyZWQiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNjAwLjIwMTInCnZhbHVlc2V0ICJTeXN0b2xpYyBibG9vZCBwcmVzc3VyZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMDQuMicKdmFsdWVzZXQgIkRpYXN0b2xpYyBCbG9vZCBQcmVzc3VyZSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy41MjYuMi4xMDQ1JwovLyBDT1VOU0VMSU5HCnZhbHVlc2V0ICJUb2JhY2NvIFVzZSBDZXNzYXRpb24gQ291bnNlbGluZyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy41MjYuMy41MDknCnZhbHVlc2V0ICJXZWlnaHQgUmVkdWN0aW9uIFJlY29tbWVuZGF0aW9ucyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjExMTYuNDIwJwp2YWx1ZXNldCAiQk1JIEZvbGxvdyBVcCBQbGFuIFNOT01FRENUIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzc2Mi4xLjQuMTE5NS4xMTEnCnZhbHVlc2V0ICJBbGNvaG9sIEJyaWVmIEludGVydmVudGlvbiBhbmQgQ291bnNlbGluZyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM3NjIuMS40LjEwMzIuMTI0Jwp2YWx1ZXNldCAiQ291bnNlbGluZyBmb3IgTnV0cml0aW9uIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjQ2NC4xMDAzLjE5NS4xMi4xMDAzJwovLyBTTU9LSU5HCnZhbHVlc2V0ICJUb2JhY2NvIFNtb2tpbmcgU3RhdHVzIFtDdXJyZW50XSAoU29jaWFsIEhpc3RvcnkpIChMT0lOQykiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMTQ2LjEzMzAnCnZhbHVlc2V0ICJUb2JhY2NvIFVzZXIiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNTI2LjIuNDIyJwovLyBCTUkKdmFsdWVzZXQgIkJNSSBSYXRpbyI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy42MDAuMS4xNDkwJwovLyBBTENPSE9MCnZhbHVlc2V0ICJBdmVyYWdlIE51bWJlciBvZiBEcmlua3MgcGVyIERyaW5raW5nIERheSI6ICdodHRwOi8vY3RzLm5sbS5uaWguZ292L2ZoaXIvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy40NjQuMTAwMy4xMDYuMTEuMTAzMCcKCi8qIEV4Y2x1c2lvbiAqLwp2YWx1ZXNldCAiUHJlZ25hbmN5IjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjUyNi4zLjM3OCcKdmFsdWVzZXQgIkVuZCBTdGFnZSBSZW5hbCBEaXNlYXNlIjogJ2h0dHA6Ly9jdHMubmxtLm5paC5nb3YvZmhpci9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjUyNi4yLjU5MCcKCgpjb2RlICJQQUNLUyBBIERBWSI6ICc4NjYzLTcnIGZyb20gIkxPSU5DIiBkaXNwbGF5ICdDaWdhcmV0dGVzIHNtb2tlZCBjdXJyZW50IChwYWNrIHBlciBkYXkpIC0gUmVwb3J0ZWQnCmNvZGUgImluLXByb2dyZXNzIjogJ2luLXByb2dyZXNzJyBmcm9tICJHb2FsIGFjaGlldmVtZW50IHN0YXR1cyIgZGlzcGxheSAnSW4gUHJvZ3Jlc3MnCmNvZGUgImltcHJvdmluZyI6ICdpbXByb3ZpbmcnIGZyb20gIkdvYWwgYWNoaWV2ZW1lbnQgc3RhdHVzIiBkaXNwbGF5ICdJbXByb3ZpbmcnCmNvZGUgImFjaGlldmVkIjogJ2FjaGlldmVkJyBmcm9tICJHb2FsIGFjaGlldmVtZW50IHN0YXR1cyIgZGlzcGxheSAnQWNoaWV2ZWQnCmNvZGUgInN1c3RhaW5pbmciOiAnc3VzdGFpbmluZycgZnJvbSAiR29hbCBhY2hpZXZlbWVudCBzdGF0dXMiIGRpc3BsYXkgJ3N1c3RhaW5pbmcnCgoKY29udGV4dCBQYXRpZW50CgpkZWZpbmUgZnVuY3Rpb24gIlBhY2tzIFBlciBEYXkiKE8gRkhJUi5PYnNlcnZhdGlvbik6CiAgRkhJUkhlbHBlcnMuVG9RdWFudGl0eShzaW5nbGV0b24gZnJvbSAoTy5jb21wb25lbnQgQyB3aGVyZSBDLmNvZGUgPSAiUEFDS1MgQSBEQVkiKS52YWx1ZSkKCmRlZmluZSAiSW5mbyI6CiAgJ2luZm8nCgpkZWZpbmUgIldhcm5pbmciOgogICd3YXJuaW5nJwoKZGVmaW5lICJDcml0aWNhbCI6CiAgJ2NyaXRpY2FsJwoKZGVmaW5lICJFcnJvcnMiOgogIG51bGwKCmRlZmluZSAiUGF0aWVudCBOYW1lIjoKICBGaXJzdChQYXRpZW50Lm5hbWUuZ2l2ZW4pCiAgICsgJyAnICsKICBGaXJzdChQYXRpZW50Lm5hbWUuZmFtaWx5KQoKCi8qIFJlY29tbWVuZGF0aW9uIENyaXRlcmlhIC0gTm9uLVBoYXJtYWNvbG9naWMgSW50ZXJ2ZW50aW9ucyAgKi8KZGVmaW5lICJNZWV0cyBJbmNsdXNpb24gQ3JpdGVyaWEiOgogIGV4aXN0cyAiQ29uZGl0aW9uIEluZGljYXRpbmcgUHJlZXhpc3RpbmcgSHlwZXJ0ZW5zaW9uIgoKZGVmaW5lICJNZWV0cyBFeGNsdXNpb24gQ3JpdGVyaWEiOgogICJQYXRpZW50IFVuZGVyIEFnZSAxOCIKICAgIG9yICJQYXRpZW50IE92ZXIgQWdlIDgwIgogICAgb3IgZXhpc3RzICJDb25kaXRpb24gSW5kaWNhdGluZyBFbmQgU3RhZ2UgUmVuYWwgRGlzZWFzZSIKICAgIG9yIGV4aXN0cyAiQ29uZGl0aW9uIEluZGljYXRpbmcgUHJlZ25hbmN5IgoKZGVmaW5lICJJbiBQb3B1bGF0aW9uIjoKICAiTWVldHMgSW5jbHVzaW9uIENyaXRlcmlhIgogIGFuZCBub3QgIk1lZXRzIEV4Y2x1c2lvbiBDcml0ZXJpYSIKCi8vIFNlcGFyYXRlIEFjdGlvbnMgZm9yIGVhY2ggRGVjaXNpb24gUG9pbnQgT3V0cHV0LiBTZXBhcmF0ZSBEZWZpbml0aW9ucyBmb3IgQWN0aW9uIENvbmRpdGlvbnMuCmRlZmluZSAiQlAgR29hbCBSZWNvbW1lbmRhdGlvbiI6CiAgJ0Rpc2N1c3MgdGFyZ2V0IGJsb29kIHByZXNzdXJlIGFuZCBzZXQgaW5pdGlhbCBCUCBnb2FsJwoKZGVmaW5lICJCUCBHb2FsIFJhdGlvbmFsZSI6CiAgJ1RPRE8nCgpkZWZpbmUgIlNtb2tpbmcgUmVjb21tZW5kYXRpb24iOgogICdSZWNvbW1lbmQgc21va2luZyBjZXNzYXRpb24gY291bnNlbGluZycKCmRlZmluZSAiU21va2luZyBSYXRpb25hbGUiOgogICdUT0RPJwoKZGVmaW5lICJCTUkgUmVjb21tZW5kYXRpb24iOgogICdSZWNvbW1lbmQgd2VpZ2h0IGxvc3MgY291bnNlbGluZy4nCgpkZWZpbmUgIkJNSSBSYXRpb25hbGUiOgogICdUT0RPJwoKZGVmaW5lICJBbGNvaG9sIFJlY29tbWVuZGF0aW9uIjoKICAnUHJvdmlkZSBhbGNvaG9sIG1vZGVyYXRpb24gY291bnNlbGluZycKCmRlZmluZSAiQWxjb2hvbCBSYXRpb25hbGUiOgogICdUT0RPJwoKZGVmaW5lICJEaWV0YXJ5IENvdW5zZWxpbmcgUmVjb21tZW5kYXRpb24iOgogICdQcm92aWRlIGRpZXRhcnkgY291bnNlbGluZywgaW5jbHVkaW5nIHNhbHQvc29kaXVtIHJlZHVjdGlvbiwgYXMgd2VsbCBhcyBjb3Vuc2VsaW5nIHJlZ2FyZGluZyBwaHlzaWNhbCBhY3Rpdml0eScKCmRlZmluZSAiRGlldGFyeSBDb3Vuc2VsaW5nIFJhdGlvbmFsZSI6CiAgJ1RPRE8nCgpkZWZpbmUgIlNtb2tpbmcsIERyaW5raW5nLCBCTUkgTm90IEluY3JlYXNlZCBSZWNvbW1lbmRhdGlvbiI6CiAgJ1Byb3ZpZGUgUmVtaW5kZXIgb2YgcmVjb21tZW5kYXRpb25zLicKCmRlZmluZSAiU21va2luZywgRHJpbmtpbmcsIEJNSSBOb3QgSW5jcmVhc2VkIFJhdGlvbmFsZSI6CiAgJ1RPRE8nCgpkZWZpbmUgIlBhdGllbnQgb24gVHJhY2sgb2YgR29hbCBSZWNvbW1lbmRhdGlvbiI6CiAgaWYgIlBhdGllbnQgYXQgQlAgR29hbCIgdGhlbiAnUGF0aWVudCBvbiB0cmFjayBvZiBnb2FsOiBFbmQgb2Ygbm9uLXBoYXJtYWNvbG9naWMgaW50ZXJ2ZW50aW9ucy4nCiAgZWxzZSAnUGF0aWVudCBub3Qgb24gdHJhY2sgb2YgZ29hbDogRGlzY3VzcyBwaGFybWFjb2xvZ2ljYWwgaW50ZXJ2ZW50aW9ucy4nCgpkZWZpbmUgIlBhdGllbnQgb24gVHJhY2sgb2YgR29hbCBSYXRpb25hbGUiOgogIGlmICJQYXRpZW50IGF0IEJQIEdvYWwiIHRoZW4gJ1BhdGllbnQgb24gdHJhY2sgb2YgZ29hbDogTm8gRnVydGhlciBBY3Rpb24gUmVxdWlyZWQuJwogIGVsc2UgJ1BhdGllbnQgbm90IG9uIHRyYWNrIG9mIGdvYWw6IERpc2N1c3MgcGhhcm1hY29sb2dpY2FsIHRyZWF0bWVudCBvcHRpb25zIHdpdGggUGF0aWVudC4nCgpkZWZpbmUgIkluZGljYXRvciBTdGF0dXMiOgogICJJbmZvIgoKZGVmaW5lICJFeGNsdXNpb24gUmVhc29uIjoKICBpZiAiTWVldHMgRXhjbHVzaW9uIENyaXRlcmlhIiB0aGVuCiAgICAoCiAgICAgICdQYXRpZW50IHdhcyBleGNsdWRlZCBmcm9tIG5vbi1waGFybWFjb2xvZ2ljIGludGVydmVudGlvbnMgZm9yIGh5cGVydGVuc2lvbiBkdWUgdG8gJwogICAgICArICgKICAgICAgICAgIGlmICJQYXRpZW50IFVuZGVyIEFnZSAxOCIgdGhlbiAnYmVpbmcgdW5kZXIgdGhlIGFnZSBvZiAxOC4nCiAgICAgICAgICBlbHNlIGlmICJQYXRpZW50IE92ZXIgQWdlIDgwIiB0aGVuICdiZWluZyBvdmVyIHRoZSBhZ2Ugb2YgODAuJwogICAgICAgICAgZWxzZSBpZiBleGlzdHMgIkNvbmRpdGlvbiBJbmRpY2F0aW5nIEVuZCBTdGFnZSBSZW5hbCBEaXNlYXNlIiB0aGVuICdoYXZpbmcgZW5kIHN0YWdlIHJlbmFsIGRpc2Vhc2UuJwogICAgICAgICAgZWxzZSBpZiBleGlzdHMgIkNvbmRpdGlvbiBJbmRpY2F0aW5nIFByZWduYW5jeSIgdGhlbiAnYmVpbmcgcHJlZ25hbnQuJwogICAgICAgICAgZWxzZSAnJwogICAgICAgICkKICAgICkKICBlbHNlICcnCgoKLyogTm9uLVBoYXJtYWNvbG9naWMgSW50ZXJ2ZW50aW9ucyBXb3JrZmxvdyAqLwovLyBEaWFnbm9zaXMgb2YgSFROIGluIFByb2JsZW0gTGlzdC4KZGVmaW5lICJDb25kaXRpb24gSW5kaWNhdGluZyBQcmVleGlzdGluZyBIeXBlcnRlbnNpb24iOgogICgKICAgIChDb21tb24uUXVhbGlmaWVkQ29uZGl0aW9uKFsiQ29uZGl0aW9uIjogIkh5cGVydGVuc2lvbiJdKSkKICAgIHVuaW9uIChDb21tb24uUXVhbGlmaWVkQ29uZGl0aW9uKFsiQ29uZGl0aW9uIjogIk5vbiBlc3NlbnRpYWwgSHlwZXJ0ZW5zaW9uIFNOT01FRENUIl0pKQogICkgUHJlZXhpc3RpbmdDb25kaXRpb24KCgovLyBEb2VzIFBhdGllbnQgaGF2ZSBhIEJQIEdvYWw/CmRlZmluZSAiUXVhbGlmeWluZyBCbG9vZCBQcmVzc3VyZSBHb2FscyI6CiAgKENvbW1vbi5RdWFsaWZpZWRHb2FsKFsiR29hbCJdKSkgQlBHb2FsCiAgICB3aGVyZSAoCiAgICAgIHNpbmdsZXRvbiBmcm9tIChCUEdvYWwudGFyZ2V0IFN5c3RvbGljCiAgICAgICAgd2hlcmUgU3lzdG9saWMubWVhc3VyZSBpbiAiU3lzdG9saWMgYmxvb2QgcHJlc3N1cmUiCiAgICAgICAgICBhbmQgU3lzdG9saWMuZGV0YWlsIGlzIFF1YW50aXR5CiAgICAgICAgICBhbmQgQ29tbW9uLldpdGhVbml0KFN5c3RvbGljLmRldGFpbCwgJ21tW0hnXScpKQogICAgKSBTeXN0b2xpY1RhcmdldCBpcyBub3QgbnVsbAogICAgICBhbmQgKAogICAgICAgIHNpbmdsZXRvbiBmcm9tIChCUEdvYWwudGFyZ2V0IERpYXN0b2xpYwogICAgICAgICAgd2hlcmUgRGlhc3RvbGljLm1lYXN1cmUgaW4gIkRpYXN0b2xpYyBCbG9vZCBQcmVzc3VyZSIKICAgICAgICAgICAgYW5kIERpYXN0b2xpYy5kZXRhaWwgaXMgUXVhbnRpdHkKICAgICAgICAgICAgYW5kIENvbW1vbi5XaXRoVW5pdChEaWFzdG9saWMuZGV0YWlsLCAnbW1bSGddJykpCiAgICAgICkgRGlhc3RvbGljVGFyZ2V0IGlzIG5vdCBudWxsCgpkZWZpbmUgIk1vc3QgUmVjZW50bHkgRXN0YWJsaXNoZWQgQmxvb2QgUHJlc3N1cmUgR29hbCI6CiAgTGFzdCAoCiAgICAiUXVhbGlmeWluZyBCbG9vZCBQcmVzc3VyZSBHb2FscyIgQlBHb2FsCiAgICAgIHNvcnQgYnkgKHN0YXJ0IGFzIGRhdGUpCiAgKQoKZGVmaW5lICJQYXRpZW50IGRvZXMgbm90IGhhdmUgYSBCUCBHb2FsIjoKICBpZiAiSW4gUG9wdWxhdGlvbiIgaXMgbm90IHRydWUgdGhlbgogICAgZmFsc2UKICBlbHNlCiAgICBub3QgZXhpc3RzICJRdWFsaWZ5aW5nIEJsb29kIFByZXNzdXJlIEdvYWxzIgoKCi8vIERvZXMgcGF0aWVudCBzbW9rZSByaWdodCBub3c/CmRlZmluZSAiT2JzZXJ2YXRpb25zIEluZGljYXRpbmcgUGF0aWVudCBpcyBhIFNtb2tlciI6CiAgKENvbW1vbi5RdWFsaWZpZWRPYnNlcnZhdGlvbihbIk9ic2VydmF0aW9uIjogIlRvYmFjY28gU21va2luZyBTdGF0dXMgW0N1cnJlbnRdIChTb2NpYWwgSGlzdG9yeSkgKExPSU5DKSJdKSkgU21va2luZ09ic2VydmVkCiAgICAgIHdoZXJlIFNtb2tpbmdPYnNlcnZlZC52YWx1ZSBhcyBDb2RlYWJsZUNvbmNlcHQgaW4gIlRvYmFjY28gVXNlciIKICAgICAgICBhbmQgc2luZ2xldG9uIGZyb20gKAogICAgICAgICAgU21va2luZ09ic2VydmVkLmNvbXBvbmVudCBDCiAgICAgICAgICAgIHdoZXJlIEZISVJIZWxwZXJzLlRvQ29uY2VwdChDLmNvZGUpIH4gIlBBQ0tTIEEgREFZIgogICAgICAgICAgICAgIGFuZCBDLnZhbHVlIGlzIFF1YW50aXR5IGFuZCBDb21tb24uV2l0aFVuaXQoQy52YWx1ZSwgJ1BhY2tzL0RheScpCiAgICAgICAgKSBpcyBub3QgbnVsbAoKZGVmaW5lICJNb3N0IFJlY2VudCBPYnNlcnZhdGlvbiBvZiBQYXRpZW50IFNtb2tpbmcgU3RhdHVzIjoKICBMYXN0KAogICAgIk9ic2VydmF0aW9ucyBJbmRpY2F0aW5nIFBhdGllbnQgaXMgYSBTbW9rZXIiIFNtb2tpbmdPYnNlcnZlZAogICAgc29ydCBieSBDb2FsZXNjZShlbmQgb2YgQ29tbW9uLiJOb3JtYWxpemUgSW50ZXJ2YWwiKGVmZmVjdGl2ZSksIGlzc3VlZCkKICApCgpkZWZpbmUgIlBhdGllbnQgaXMgQ3VycmVudGx5IGEgU21va2VyIjoKICBpZiAiSW4gUG9wdWxhdGlvbiIgaXMgbm90IHRydWUgdGhlbgogICAgZmFsc2UKICBlbHNlCiAgICAiTW9zdCBSZWNlbnQgT2JzZXJ2YXRpb24gb2YgUGF0aWVudCBTbW9raW5nIFN0YXR1cyIgaXMgbm90IG51bGwKCi8vIElzIHBhdGllbnQncyBCTUkgPiAyNT8KZGVmaW5lICJPYnNlcnZhdGlvbnMgU3BlY2lmeWluZyBQYXRpZW50IEJNSSI6CiAgKENvbW1vbi5RdWFsaWZpZWRPYnNlcnZhdGlvbihbIk9ic2VydmF0aW9uIjogIkJNSSBSYXRpbyJdKSkgQk1JT2JzZXJ2ZWQKICAgIHdoZXJlIEJNSU9ic2VydmVkLnZhbHVlIGlzIFF1YW50aXR5CiAgICAgIGFuZCBDb21tb24uV2l0aFVuaXQoQk1JT2JzZXJ2ZWQudmFsdWUsICdrZy9tMicpCgpkZWZpbmUgIk1vc3QgUmVjZW50IFBhdGllbnQgQk1JIjoKICBMYXN0KAogICAgIk9ic2VydmF0aW9ucyBTcGVjaWZ5aW5nIFBhdGllbnQgQk1JIiBCTUlPYnNlcnZlZAogICAgc29ydCBieSBDb2FsZXNjZShlbmQgb2YgQ29tbW9uLiJOb3JtYWxpemUgSW50ZXJ2YWwiKGVmZmVjdGl2ZSksIGlzc3VlZCkKICApCgpkZWZpbmUgIlBhdGllbnQgQk1JIGlzIEdyZWF0ZXIgdGhhbiAyNSBrZy9tMiI6CiAgaWYgIkluIFBvcHVsYXRpb24iIGlzIG5vdCB0cnVlIHRoZW4KICAgIGZhbHNlCiAgZWxzZQogICAgIk1vc3QgUmVjZW50IFBhdGllbnQgQk1JIi52YWx1ZSA+PSAyNS4wICdrZy9tMicKCgovLyBEb2VzIHBhdGllbnQgZHJpbmsgaGVhdmlseT8KZGVmaW5lICJPYnNlcnZhdGlvbnMgTWVhc3VyaW5nIEFtb3VudCBvZiBBbGNvaG9saWMgRHJpbmtzIFBhdGllbnQgaGFzIHBlciBEcmlua2luZyBEYXkiOgogIChDb21tb24uUXVhbGlmaWVkT2JzZXJ2YXRpb24oWyJPYnNlcnZhdGlvbiI6ICJBdmVyYWdlIE51bWJlciBvZiBEcmlua3MgcGVyIERyaW5raW5nIERheSJdKSkgRHJpbmtzUGVyRGF5CiAgICB3aGVyZSBEcmlua3NQZXJEYXkudmFsdWUgaXMgUXVhbnRpdHkKICAgICAgYW5kIENvbW1vbi5XaXRoVW5pdChEcmlua3NQZXJEYXkudmFsdWUsICdEcmlua3MvRGF5JykKCmRlZmluZSAiTW9zdCBSZWNlbnQgUGF0aWVudCBEcmlua2luZyBPYnNlcnZhdGlvbiI6CiAgTGFzdCgKICAgICJPYnNlcnZhdGlvbnMgTWVhc3VyaW5nIEFtb3VudCBvZiBBbGNvaG9saWMgRHJpbmtzIFBhdGllbnQgaGFzIHBlciBEcmlua2luZyBEYXkiIERyaW5rc1BlckRheQogICAgc29ydCBieSBDb2FsZXNjZShlbmQgb2YgQ29tbW9uLiJOb3JtYWxpemUgSW50ZXJ2YWwiKGVmZmVjdGl2ZSksIGlzc3VlZCkKICApCgpkZWZpbmUgIkhlYXZ5IERhaWx5IERyaW5rZXIiOgogIGlmIFBhdGllbnQuZ2VuZGVyID0gJ21hbGUnIHRoZW4gNS4wCiAgZWxzZSA0LjAKCmRlZmluZSAiUGF0aWVudCBpcyBhIEhlYXZ5IEFsY29ob2xpYyBEcmlua2VyIjoKICBpZiAiSW4gUG9wdWxhdGlvbiIgaXMgbm90IHRydWUgdGhlbgogICAgZmFsc2UKICBlbHNlCiAgICAiTW9zdCBSZWNlbnQgUGF0aWVudCBEcmlua2luZyBPYnNlcnZhdGlvbiIudmFsdWUudmFsdWUgPj0gIkhlYXZ5IERhaWx5IERyaW5rZXIiCgoKLy8gSGFzIFBhdGllbnQgcmVjZWl2ZWQgbm9uLXBoYXJtYWNvbG9naWNhbCBpbnN0cnVjdGlvbnMgcHJldmlvdXNseT8KZGVmaW5lICJDb3Vuc2VsaW5nIGZvciBOb24tUGhhcm1hY29sb2dpY2FsIEludGVydmVudGlvbnMiOgogICgKICAgIENvbW1vbi5RdWFsaWZpZWRQcm9jZWR1cmUoWyJQcm9jZWR1cmUiOiAiVG9iYWNjbyBVc2UgQ2Vzc2F0aW9uIENvdW5zZWxpbmciXSkKICAgIHVuaW9uIENvbW1vbi5RdWFsaWZpZWRQcm9jZWR1cmUoWyJQcm9jZWR1cmUiOiAiV2VpZ2h0IFJlZHVjdGlvbiBSZWNvbW1lbmRhdGlvbnMiXSkKICAgIHVuaW9uIENvbW1vbi5RdWFsaWZpZWRQcm9jZWR1cmUoWyJQcm9jZWR1cmUiOiAiQk1JIEZvbGxvdyBVcCBQbGFuIFNOT01FRENUIl0pCiAgICB1bmlvbiBDb21tb24uUXVhbGlmaWVkUHJvY2VkdXJlKFsiUHJvY2VkdXJlIjogIkFsY29ob2wgQnJpZWYgSW50ZXJ2ZW50aW9uIGFuZCBDb3Vuc2VsaW5nIl0pCiAgICB1bmlvbiBDb21tb24uUXVhbGlmaWVkUHJvY2VkdXJlKFsiUHJvY2VkdXJlIjogIkNvdW5zZWxpbmcgZm9yIE51dHJpdGlvbiJdKQogICkgTm9uUGhhcm1hY29sb2dpY2FsQ291bnNlbGluZwoKZGVmaW5lICJDb3Vuc2VsaW5nIGZyb20gTGFzdCBWaXNpdCI6CiAgKAogICAgTGFzdCgKICAgICAgIkNvdW5zZWxpbmcgZm9yIE5vbi1QaGFybWFjb2xvZ2ljYWwgSW50ZXJ2ZW50aW9ucyIgQ291bnNlbGluZwogICAgICBzb3J0IGJ5IHN0YXJ0IG9mIENvbW1vbi4iTm9ybWFsaXplIEludGVydmFsIihwZXJmb3JtZWQpCiAgICApCiAgKSBSZWNlbnRDb3Vuc2VsaW5nCiAgICByZXR1cm4gUmVjZW50Q291bnNlbGluZy5yZWFzb25SZWZlcmVuY2UKCmRlZmluZSAiQ291bnNlbGluZyBTbW9raW5nIE9ic2VydmF0aW9uIjoKICBMYXN0KCJPYnNlcnZhdGlvbnMgSW5kaWNhdGluZyBQYXRpZW50IGlzIGEgU21va2VyIiBTbW9raW5nT2JzZXJ2ZWQKICAgIHdpdGggIkNvdW5zZWxpbmcgZnJvbSBMYXN0IFZpc2l0IiBDb3Vuc2VsaW5nCiAgICAgIHN1Y2ggdGhhdCBTbW9raW5nT2JzZXJ2ZWQuaWQgPSBDb21tb24uR2V0SWQoQ291bnNlbGluZy5yZWZlcmVuY2UpKQoKZGVmaW5lICJDb3Vuc2VsaW5nIERyaW5raW5nIE9ic2VydmF0aW9uIjoKICBMYXN0KCJPYnNlcnZhdGlvbnMgTWVhc3VyaW5nIEFtb3VudCBvZiBBbGNvaG9saWMgRHJpbmtzIFBhdGllbnQgaGFzIHBlciBEcmlua2luZyBEYXkiIERyaW5rc1BlckRheQogICAgd2l0aCAiQ291bnNlbGluZyBmcm9tIExhc3QgVmlzaXQiIENvdW5zZWxpbmcKICAgICAgc3VjaCB0aGF0IERyaW5rc1BlckRheS5pZCA9IENvbW1vbi5HZXRJZChDb3Vuc2VsaW5nLnJlZmVyZW5jZSkpCgpkZWZpbmUgIkNvdW5zZWxpbmcgQk1JIE9ic2VydmF0aW9uIjoKICBMYXN0KCJPYnNlcnZhdGlvbnMgU3BlY2lmeWluZyBQYXRpZW50IEJNSSIgQk1JT2JzZXJ2ZWQKICAgIHdpdGggIkNvdW5zZWxpbmcgZnJvbSBMYXN0IFZpc2l0IiBDb3Vuc2VsaW5nCiAgICAgIHN1Y2ggdGhhdCBCTUlPYnNlcnZlZC5pZCA9IENvbW1vbi5HZXRJZChDb3Vuc2VsaW5nLnJlZmVyZW5jZSkpCgpkZWZpbmUgIlBhdGllbnQgU21va2luZyBJbmNyZWFzZWQgU2luY2UgTGFzdCBWaXNpdCI6CiAgIlBhY2tzIFBlciBEYXkiKCJNb3N0IFJlY2VudCBPYnNlcnZhdGlvbiBvZiBQYXRpZW50IFNtb2tpbmcgU3RhdHVzIikgPiAiUGFja3MgUGVyIERheSIoIkNvdW5zZWxpbmcgU21va2luZyBPYnNlcnZhdGlvbiIpCgpkZWZpbmUgIlBhdGllbnQgRHJpbmtpbmcgSW5jcmVhc2VkIFNpbmNlIExhc3QgVmlzaXQiOgogIGZyb20KICAgICJNb3N0IFJlY2VudCBQYXRpZW50IERyaW5raW5nIE9ic2VydmF0aW9uIiBEcmlua2luZ1RoaXNWaXNpdCwKICAgICJDb3Vuc2VsaW5nIERyaW5raW5nIE9ic2VydmF0aW9uIiBEcmlua2luZ0xhc3RWaXNpdAogICAgICByZXR1cm4gKEZISVJIZWxwZXJzLlRvUXVhbnRpdHkoRHJpbmtpbmdUaGlzVmlzaXQudmFsdWUpID4gRkhJUkhlbHBlcnMuVG9RdWFudGl0eShEcmlua2luZ0xhc3RWaXNpdC52YWx1ZSkpIGlzIHRydWUKCmRlZmluZSAiUGF0aWVudCBCTUkgSW5jcmVhc2VkIFNpbmNlIExhc3QgVmlzaXQiOgogIGZyb20KICAgICJNb3N0IFJlY2VudCBQYXRpZW50IEJNSSIgQk1JVGhpc1Zpc2l0LAogICAgIkNvdW5zZWxpbmcgQk1JIE9ic2VydmF0aW9uIiBCTUlMYXN0VmlzaXQKICAgICAgcmV0dXJuIChGSElSSGVscGVycy5Ub1F1YW50aXR5KEJNSVRoaXNWaXNpdC52YWx1ZSkgPiBGSElSSGVscGVycy5Ub1F1YW50aXR5KEJNSUxhc3RWaXNpdC52YWx1ZSkpIGlzIHRydWUKCmRlZmluZSAiUGF0aWVudCBIYXMgTm90IEluY3JlYXNlZCBpbiBTbW9raW5nLCBCTUksIE9yIERyaW5raW5nIFNpbmNlIExhc3QgQ291bnNlbGluZyI6CiAgaWYgIkluIFBvcHVsYXRpb24iIGlzIG5vdCB0cnVlCiAgICB0aGVuIGZhbHNlCiAgZWxzZSAoCiAgICBleGlzdHMgIkNvdW5zZWxpbmcgZnJvbSBMYXN0IFZpc2l0IgogICAgICBhbmQgbm90ICgKICAgICAgICAiUGF0aWVudCBTbW9raW5nIEluY3JlYXNlZCBTaW5jZSBMYXN0IFZpc2l0IiBpcyB0cnVlCiAgICAgICAgb3IgIlBhdGllbnQgRHJpbmtpbmcgSW5jcmVhc2VkIFNpbmNlIExhc3QgVmlzaXQiIGlzIHRydWUKICAgICAgICBvciAiUGF0aWVudCBCTUkgSW5jcmVhc2VkIFNpbmNlIExhc3QgVmlzaXQiIGlzIHRydWUKICAgICAgKQogICkKCgovLyBJcyBQYXRpZW50IG9uIFRyYWNrIHRvIHJlYWNoIEJQIEdvYWw/CmRlZmluZSAiQlAgR29hbCBEZW1vbnN0cmF0aW5nIFBhdGllbnQgSW1wcm92ZW1lbnQiOgogICJNb3N0IFJlY2VudGx5IEVzdGFibGlzaGVkIEJsb29kIFByZXNzdXJlIEdvYWwiIEJQR29hbAogICAgd2hlcmUgRkhJUkhlbHBlcnMuVG9Db25jZXB0KEJQR29hbC5hY2hpZXZlbWVudFN0YXR1cykgfiAiaW4tcHJvZ3Jlc3MiCiAgICAgIG9yIEZISVJIZWxwZXJzLlRvQ29uY2VwdChCUEdvYWwuYWNoaWV2ZW1lbnRTdGF0dXMpIH4gImltcHJvdmluZyIKICAgICAgb3IgRkhJUkhlbHBlcnMuVG9Db25jZXB0KEJQR29hbC5hY2hpZXZlbWVudFN0YXR1cykgfiAiYWNoaWV2ZWQiCiAgICAgIG9yIEZISVJIZWxwZXJzLlRvQ29uY2VwdChCUEdvYWwuYWNoaWV2ZW1lbnRTdGF0dXMpIH4gInN1c3RhaW5pbmciCgpkZWZpbmUgIlBhdGllbnQgYXQgQlAgR29hbCI6CiAgaWYgIkluIFBvcHVsYXRpb24iIGlzIG5vdCB0cnVlIHRoZW4KICAgIGZhbHNlCiAgZWxzZQogICAgIkJQIEdvYWwgRGVtb25zdHJhdGluZyBQYXRpZW50IEltcHJvdmVtZW50IiBpcyBub3QgbnVsbAoKCi8qIEFjdGlvbiBDb25kaXRpb25hbHMgKi8KZGVmaW5lICJQYXRpZW50IGlzIEN1cnJlbnRseSBhIFNtb2tlciBBY3Rpb24gUGF0aCI6CiAgaWYgIkluIFBvcHVsYXRpb24iIGlzIG5vdCB0cnVlIHRoZW4KICAgIGZhbHNlCiAgZWxzZSBub3QgIlBhdGllbnQgSGFzIE5vdCBJbmNyZWFzZWQgaW4gU21va2luZywgQk1JLCBPciBEcmlua2luZyBTaW5jZSBMYXN0IENvdW5zZWxpbmciCiAgICBhbmQgKCJQYXRpZW50IGlzIEN1cnJlbnRseSBhIFNtb2tlciIgaXMgdHJ1ZSkKCmRlZmluZSAiUGF0aWVudCBCTUkgaXMgR3JlYXRlciB0aGFuIDI1IGtnL20yIEFjdGlvbiBQYXRoIjoKICBpZiAiSW4gUG9wdWxhdGlvbiIgaXMgbm90IHRydWUgdGhlbgogICAgZmFsc2UKICBlbHNlIG5vdCAiUGF0aWVudCBIYXMgTm90IEluY3JlYXNlZCBpbiBTbW9raW5nLCBCTUksIE9yIERyaW5raW5nIFNpbmNlIExhc3QgQ291bnNlbGluZyIKICAgIGFuZCAoIlBhdGllbnQgQk1JIGlzIEdyZWF0ZXIgdGhhbiAyNSBrZy9tMiIgaXMgdHJ1ZSkKCmRlZmluZSAiUGF0aWVudCBpcyBhIEhlYXZ5IEFsY29ob2xpYyBEcmlua2VyIEFjdGlvbiBQYXRoIjoKICBpZiAiSW4gUG9wdWxhdGlvbiIgaXMgbm90IHRydWUgdGhlbgogICAgZmFsc2UKICBlbHNlIG5vdCAiUGF0aWVudCBIYXMgTm90IEluY3JlYXNlZCBpbiBTbW9raW5nLCBCTUksIE9yIERyaW5raW5nIFNpbmNlIExhc3QgQ291bnNlbGluZyIKICAgIGFuZCAoIlBhdGllbnQgaXMgYSBIZWF2eSBBbGNvaG9saWMgRHJpbmtlciIgaXMgdHJ1ZSkKCmRlZmluZSAiUGF0aWVudCBpcyBpbiBOZWVkIG9mIERpZXRhcnkgQ291bnNlbGluZyBBY3Rpb24gUGF0aCI6CiAgaWYgIkluIFBvcHVsYXRpb24iIGlzIG5vdCB0cnVlIHRoZW4KICAgIGZhbHNlCiAgZWxzZSBub3QgZXhpc3RzICJDb3Vuc2VsaW5nIGZvciBOb24tUGhhcm1hY29sb2dpY2FsIEludGVydmVudGlvbnMiCiAgICBvciAobm90ICJQYXRpZW50IEhhcyBOb3QgSW5jcmVhc2VkIGluIFNtb2tpbmcsIEJNSSwgT3IgRHJpbmtpbmcgU2luY2UgTGFzdCBDb3Vuc2VsaW5nIiBpcyB0cnVlKQoKZGVmaW5lICJQYXRpZW50IFJlbWluZGVyIFJlY29tbWVuZGF0aW9ucyBBY3Rpb24gUGF0aCI6CiAgaWYgIkluIFBvcHVsYXRpb24iIGlzIG5vdCB0cnVlIHRoZW4KICAgIGZhbHNlCiAgZWxzZSAiUGF0aWVudCBIYXMgTm90IEluY3JlYXNlZCBpbiBTbW9raW5nLCBCTUksIE9yIERyaW5raW5nIFNpbmNlIExhc3QgQ291bnNlbGluZyIgaXMgdHJ1ZQoKCi8qIEV4Y2x1c2lvbiBDcml0ZXJpYSAqLwpkZWZpbmUgIlBhdGllbnQgVW5kZXIgQWdlIDE4IjoKICBBZ2VJblllYXJzQXQoVG9kYXkoKSkgPCAxOAoKZGVmaW5lICJQYXRpZW50IE92ZXIgQWdlIDgwIjoKICBBZ2VJblllYXJzQXQoVG9kYXkoKSkgPiA4MAoKZGVmaW5lICJDb25kaXRpb24gSW5kaWNhdGluZyBFbmQgU3RhZ2UgUmVuYWwgRGlzZWFzZSI6CiAgKENvbW1vbi5RdWFsaWZpZWRDb25kaXRpb24oWyJDb25kaXRpb24iOiAiRW5kIFN0YWdlIFJlbmFsIERpc2Vhc2UiXSkpIEVTUkQKCmRlZmluZSAiQ29uZGl0aW9uIEluZGljYXRpbmcgUHJlZ25hbmN5IjoKICAoQ29tbW9uLlF1YWxpZmllZENvbmRpdGlvbihbIkNvbmRpdGlvbiI6ICJQcmVnbmFuY3kiXSkpIFByZWduYW5jeQogICAgd2hlcmUgZW5kIG9mIENvbW1vbi4iUHJldmFsZW5jZSBQZXJpb2QiKFByZWduYW5jeSkgPiBUb2RheSgpCgovKiBURVNUICovCmRlZmluZSAiVEVTVCBQYXRpZW50IEFnZSI6CiAgQWdlSW5ZZWFycygpCgpkZWZpbmUgIlRFU1QgUGF0aWVudCBCTUkgUmVzb3VyY2VzIjoKICAiT2JzZXJ2YXRpb25zIFNwZWNpZnlpbmcgUGF0aWVudCBCTUkiLmlkCgpkZWZpbmUgIlRFU1QgTW9zdCBSZWNlbnQgUGF0aWVudCBCTUkiOgogICJNb3N0IFJlY2VudCBQYXRpZW50IEJNSSIgQk1JCiAgICByZXR1cm4gVHVwbGUgewogICAgICAiSUQiOiBCTUkuaWQsCiAgICAgICJEYXRlIjogQk1JLmVmZmVjdGl2ZS5lbmQsCiAgICAgICJWYWx1ZSI6IEJNSS52YWx1ZS52YWx1ZSwKICAgICAgIlVuaXQiOiBCTUkudmFsdWUudW5pdAogICAgfQoKZGVmaW5lICJURVNUIFBhdGllbnQgUGFja3MgUGVyIERheSBNb3N0IFJlY2VudCI6CiAgIlBhY2tzIFBlciBEYXkiKCJNb3N0IFJlY2VudCBPYnNlcnZhdGlvbiBvZiBQYXRpZW50IFNtb2tpbmcgU3RhdHVzIikKCmRlZmluZSAiVEVTVCBQYXRpZW50IFBhY2tzIFBlciBEYXkgQXQgQ291bnNlbGluZyI6CiAgIlBhY2tzIFBlciBEYXkiKCJDb3Vuc2VsaW5nIFNtb2tpbmcgT2JzZXJ2YXRpb24iKQo="
  }]
}
