{
  "resourceType": "Library",
  "id": "library-Hypertension",
  "meta": {
    "versionId": "1",
    "lastUpdated": "2020-04-15T12:00:00.000-07:00"
  },
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "Device/cqf-tooling"
    }
  } ],
  "url": "http://fhir.org/guides/ohsu/htnu18ig/Library/Hypertension",
  "version": "0.1",
  "name": "Hypertension",
  "title": "Initial Diagnosis Logic",
  "status": "active",
  "experimental": false,
  "type": {
    "coding": [ {
      "system": "http://hl7.org/fhir/library-type",
      "code": "logic-library",
      "display": "Logic Library"
    } ]
  },
  "date": "2020-04-15T00:00:00-08:00",
  "publisher": "Oregon Health and Science University (OHSU)",
  "description": "Decision logic for identifying hypertension in undiagnosed patients",
  "useContext": [ {
    "code": {
      "system": "http://hl7.org/fhir/usage-context-type",
      "code": "focus",
      "display": "Clinical Focus"
    }
  } ],
  "jurisdiction": [ {
    "coding": [ {
      "system": "urn:iso:std:iso:3166",
      "code": "US",
      "display": "United States of America"
    } ]
  } ],
  "purpose": "The purpose of this is to act as a 'hello world' sort of simple logic for testing end-to-end processing of the system.",
  "usage": "This is to be used in conjunction with a patient-facing FHIR application.",
  "copyright": "Â© OHSU 2020+.",
  "topic": [ {
    "text": "Hypertension Management"
  } ],
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBIeXBlcnRlbnNpb24gdmVyc2lvbiAnMC4xJwoKdXNpbmcgRkhJUiB2ZXJzaW9uICc0LjAuMScKCmluY2x1ZGUgRkhJUkhlbHBlcnMgdmVyc2lvbiAnNC4wLjEnIGNhbGxlZCBGSElSSGVscGVycwppbmNsdWRlIE9IU1VIVE5Db21tb24gdmVyc2lvbiAnMC4xJyBjYWxsZWQgQ29tbW9uCgpjb2Rlc3lzdGVtICJ2MyBDb2RlIFN5c3RlbSBBY3RDb2RlIjogJ2h0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL0NvZGVTeXN0ZW0vdjMtQWN0Q29kZScKCi8qIEluY2x1c2lvbiAqLwp2YWx1ZXNldCAiU3lzdG9saWMgYmxvb2QgcHJlc3N1cmUiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzNzYyLjEuNC4xMTA0LjInCnZhbHVlc2V0ICJEaWFzdG9saWMgQmxvb2QgUHJlc3N1cmUiOiAnaHR0cDovL2N0cy5ubG0ubmloLmdvdi9maGlyL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNTI2LjIuMTA0NScKCmNvZGUgImFtYnVsYXRvcnkiOiAnQU1CJyBmcm9tICJ2MyBDb2RlIFN5c3RlbSBBY3RDb2RlIiBkaXNwbGF5ICdhbWJ1bGF0b3J5JwoKY29udGV4dCBQYXRpZW50CgpkZWZpbmUgIkluZm8iOgogICdpbmZvJwoKZGVmaW5lICJXYXJuaW5nIjoKICAnd2FybmluZycKCmRlZmluZSAiQ3JpdGljYWwiOgogICdjcml0aWNhbCcKCmRlZmluZSAiRXJyb3JzIjoKICBudWxsCgpkZWZpbmUgIlBhdGllbnQgTmFtZSI6CiAgRmlyc3QoUGF0aWVudC5uYW1lLmdpdmVuKQogICArICcgJyArCiAgRmlyc3QoUGF0aWVudC5uYW1lLmZhbWlseSkKCgovKiBSZWNvbW1lbmRhdGlvbiBDcml0ZXJpYSAtIEh5cGVydGVuc2lvbiAgKi8KZGVmaW5lICJNZWV0cyBJbmNsdXNpb24gQ3JpdGVyaWEiOgogbm90IGV4aXN0cyBDb21tb24uIkNvbmRpdGlvbiBJbmRpY2F0aW5nIFByZWV4aXN0aW5nIEh5cGVydGVuc2lvbiIKCmRlZmluZSAiTWVldHMgRXhjbHVzaW9uIENyaXRlcmlhIjoKICBDb21tb24uIlBhdGllbnQgVW5kZXIgQWdlIDE4IgogICAgb3IgQ29tbW9uLiJQYXRpZW50IE92ZXIgQWdlIDgwIgogICAgb3IgZXhpc3RzIENvbW1vbi4iQ29uZGl0aW9uIEluZGljYXRpbmcgRW5kIFN0YWdlIFJlbmFsIERpc2Vhc2UiCiAgICBvciBleGlzdHMgQ29tbW9uLiJDb25kaXRpb24gSW5kaWNhdGluZyBQcmVnbmFuY3kiCiAgICBvciBDb21tb24uIkhUTiBDcmlzaXMiCgpkZWZpbmUgIkluIFBvcHVsYXRpb24iOgogICJNZWV0cyBJbmNsdXNpb24gQ3JpdGVyaWEiCiAgYW5kIG5vdCAiTWVldHMgRXhjbHVzaW9uIENyaXRlcmlhIgoKZGVmaW5lICJSZWNvbW1lbmRhdGlvbiI6CiAgaWYgbm90ICJJbiBQb3B1bGF0aW9uIiB0aGVuICdOb25lJwogIGVsc2UgaWYgbm90IENvbW1vbi4iSGFzIEJQIFNldCIgdGhlbiAnQ29uc2lkZXIgb2J0YWluaW5nIGFkZGl0aW9uYWwgYmxvb2QgcHJlc3N1cmUgbWVhc3VyZW1lbnRzLicKICBlbHNlIGlmICJIVE4gU3RhZ2UgMiIgdGhlbiAnQ29uc2lkZXIgZGlhZ25vc2lzIG9mIFN0YWdlIDIgaHlwZXJ0ZW5zaW9uLicKICBlbHNlIGlmICJDb25zaWRlciBIVE4gU3RhZ2UgMiIgdGhlbiAnQ29uc2lkZXIgZGlhZ25vc2lzIG9mIFN0YWdlIDIgaHlwZXJ0ZW5zaW9uLicKICBlbHNlIGlmICJDb25zaWRlciBIVE4gU3RhZ2UgMSIgdGhlbiAnQ29uc2lkZXIgZGlhZ25vc2lzIG9mIFN0YWdlIDEgaHlwZXJ0ZW5zaW9uLicKICBlbHNlIGlmICJQcmVzY3JpYmUgTW9uaXRvcmluZyB0byBDb25maXJtIEhUTiIgdGhlbiAnVXNlIGFtYnVsYXRvcnkgb3IgaG9tZSBibG9vZCBwcmVzc3VyZSBtb25pdG9yaW5nIHRvIGNvbmZpcm0gZGlhZ25vc2lzLicKICBlbHNlIGlmIENvbW1vbi4iQlAgSGlnaGx5IFZhcmlhYmxlIiB0aGVuICdVc2UgYW1idWxhdG9yeSBibG9vZCBwcmVzc3VyZSBtb25pdG9yaW5nIHRvIGFkZHJlc3MgYmxvb2QgcHJlc3N1cmUgdmFyaWFiaWxpdHkuJwogIGVsc2UgJycKCmRlZmluZSAiUmF0aW9uYWxlIENvbWJpbmVkIERhdGEiOgogICJSYXRpb25hbGUiICsgJ3wnICsgIlN1Z2dlc3Rpb25zIiArICd8JyArICJTZWxlY3Rpb24gQmVoYXZpb3IiICsgJ3wnICsgIkxpbmtzIgoKZGVmaW5lICJSYXRpb25hbGUiOgogIGlmIG5vdCAiSW4gUG9wdWxhdGlvbiIgdGhlbiAnTm9uZScKICBlbHNlIGlmIG5vdCBDb21tb24uIkhhcyBCUCBTZXQiIHRoZW4gJ3t7I3BhdGllbnR9fVlvdSByZWNlbnRseSBoYWQgYSBoaWdoIGJsb29kIHByZXNzdXJlIHJlYWRpbmcsIGJ1dCA8c3Ryb25nPndlIGRvIG5vdCBoYXZlIGVub3VnaCBibG9vZCBwcmVzc3VyZSBtZWFzdXJlbWVudHM8L3N0cm9uZz4gdG8gb2J0YWluIGEgZnVsbCBwaWN0dXJlIG9mIHlvdXIgY3VycmVudCBoZWFsdGguIFdlIGNvbnNpZGVyIGEgZnVsbCBzZXQgb2YgbWVhc3VyZW1lbnRzIHRvIGJlIG1vcmUgdGhhbiA0IGluLW9mZmljZSBtZWFzdXJlbWVudHMsIDYgaG9tZSBtZWFzdXJlbWVudHMsIG9yIDI0IGhvdXJzIG9mIGFtYnVsYXRvcnkgbW9uaXRvcmluZy57ey9wYXRpZW50fX17eyNjYXJlVGVhbX19UGF0aWVudCBkb2VzIG5vdCBoYXZlIGVub3VnaCBibG9vZCBwcmVzc3VyZXMgdG8gbWFrZSBhIHN0cm9uZyBkZXRlcm1pbmF0aW9uIG9mIGNvbnRyb2wgb3IgZGlhZ25vc2lzLiAgV2UgY29uc2lkZXIgYSBmdWxsIHNldCB0byBiZSBtb3JlIHRoYW4gNCBpbi1vZmZpY2UgbWVhc3VyZW1lbnRzLCA2IGhvbWUgbWVhc3VyZW1lbnRzLCBvciAyNCBob3VycyBvZiBhbWJ1bGF0b3J5IG1vbml0b3Jpbmcue3svY2FyZVRlYW19fScKICBlbHNlIGlmICJIVE4gU3RhZ2UgMiIgdGhlbiAne3sjcGF0aWVudH19WW91IGhhZCBtdWx0aXBsZSBoaWdoIGJsb29kIHByZXNzdXJlIHJlYWRpbmdzIHJlY2VudGx5ICjiiaUgMTQwIG1tSGcgc3lzdG9saWMgYW5kL29yIOKJpSA5MCBtbUhnIGRpYXN0b2xpYykuIFRoZXNlIHJlYWRpbmdzIDxzdHJvbmc+c3VnZ2VzdCB5b3UgaGF2ZSBzdGFnZSAyIGh5cGVydGVuc2lvbjwvc3Ryb25nPiwgYSB0cmVhdGFibGUgY29uZGl0aW9uIG9mIGhpZ2ggYmxvb2QgcHJlc3N1cmUuIFBsZWFzZSBkaXNjdXNzIG5leHQgc3RlcHMgd2l0aCB5b3VyIGNhcmUgdGVhbS57ey9wYXRpZW50fX17eyNjYXJlVGVhbX19UGF0aWVudCBoYWQgbXVsdGlwbGUgYmxvb2QgcHJlc3N1cmUgcmVhZGluZ3Mgb2YgU0JQID49IDE0MCBtbSBIRyBhbmQvb3IgREJQID49IDkwIG1tIEhnLiBUaGlzIHN0cm9uZ2x5IHN1Z2dlc3RzIHRoZSBwYXRpZW50IGhhcyBTdGFnZSAyIEh5cGVydGVuc2lvbiBidXQgbm8gZGlhZ25vc2lzIHdhcyBmb3VuZC57ey9jYXJlVGVhbX19JwogIGVsc2UgaWYgIkNvbnNpZGVyIEhUTiBTdGFnZSAyIiB0aGVuICd7eyNwYXRpZW50fX1Zb3UgcmVjZW50bHkgaGFkIGhpZ2ggYmxvb2QgcHJlc3N1cmUgcmVhZGluZ3MgKOKJpSAxNDAgbW1IZyBzeXN0b2xpYyBhbmQvb3Ig4omlIG1tSGcgOTAgZGlhc3RvbGljKSB3aGljaCA8c3Ryb25nPnN1Z2dlc3QgeW91IGhhdmUgaHlwZXJ0ZW5zaW9uPC9zdHJvbmc+LCBidXQgdGhlcmUgaXMgbm8gZGlhZ25vc2lzIGluIHlvdXIgY2hhcnQuIFlvdSBtYXkgd2FudCB0byBkaXNjdXNzIHlvdXIgYmxvb2QgcHJlc3N1cmUgd2l0aCB5b3VyIGNhcmUgdGVhbS57ey9wYXRpZW50fX17eyNjYXJlVGVhbX19UGF0aWVudCBoYWQgbXVsdGlwbGUgYmxvb2QgcHJlc3N1cmUgcmVhZGluZ3Mgb2YgU0JQID4gMTQwbW0gSGcgYW5kL29yIERCUCA+IDkwLiBUaGlzIHN1Z2dlc3RzIHRoZSBwYXRpZW50IG1heSBoYXZlIFN0YWdlIDIgSHlwZXJ0ZW5zaW9uLCBidXQgbm8gZGlhZ25vc2lzIHdhcyBmb3VuZC57ey9jYXJlVGVhbX19JwogIGVsc2UgaWYgIkNvbnNpZGVyIEhUTiBTdGFnZSAxIiB0aGVuICd7eyNwYXRpZW50fX1Zb3UgcmVjZW50bHkgaGFkIGhpZ2ggYmxvb2QgcHJlc3N1cmUgcmVhZGluZ3MgKOKJpSAxMzAgbW1IZyBzeXN0b2xpYyBhbmQvb3Ig4omlIDgwIG1tSGcgZGlhc3RvbGljKSB3aGljaCA8c3Ryb25nPnN1Z2dlc3QgeW91IGhhdmUgaHlwZXJ0ZW5zaW9uPC9zdHJvbmc+LCBidXQgZG8gbm90IGhhdmUgYSByZWNvcmRlZCBkaWFnbm9zaXMgb2YgaHlwZXJ0ZW5zaW9uLiBZb3UgbWF5IHdhbnQgdG8gZGlzY3VzcyB5b3VyIGJsb29kIHByZXNzdXJlIHdpdGggeW91ciBjYXJlIHRlYW0ue3svcGF0aWVudH19e3sjY2FyZVRlYW19fVBhdGllbnQgaGFkIG11bHRpcGxlIGJsb29kIHByZXNzdXJlIHJlYWRpbmdzIG9mIFNCUCA+IDEzMG1tIEhnIGFuZC9vciBEQlAgPiA4MC4gVGhpcyBzdWdnZXN0cyB0aGUgcGF0aWVudCBtYXkgaGF2ZSBTdGFnZSAxIEh5cGVydGVuc2lvbiwgYnV0IG5vIGRpYWdub3NpcyB3YXMgZm91bmQue3svY2FyZVRlYW19fScKICBlbHNlIGlmICJQcmVzY3JpYmUgTW9uaXRvcmluZyB0byBDb25maXJtIEhUTiIgdGhlbiAne3sjcGF0aWVudH19WW91IHJlY2VudGx5IGhhZCBhIDxzdHJvbmc+aGlnaCBibG9vZCBwcmVzc3VyZSByZWFkaW5nPC9zdHJvbmc+LCBidXQgZG8gbm90IGhhdmUgYSByZWNvcmRlZCBkaWFnbm9zaXMgb2YgaHlwZXJ0ZW5zaW9uLiBEaXNjdXNzIG91dCBvZiBvZmZpY2UgYmxvb2QgcHJlc3N1cmUgbW9uaXRvcmluZyB3aXRoIHlvdXIgY2FyZSB0ZWFtLnt7L3BhdGllbnR9fXt7I2NhcmVUZWFtfX1JbiBhZHVsdHMgd2l0aCBzdXNwZWN0ZWQgaHlwZXJ0ZW5zaW9uIGFuZCB3aXRob3V0IGRpYWdub3N0aWMgdW5jZXJ0YWludHkgb3IgQlAgdmFyaWFiaWxpdHksIHVzZSBBbWJ1bGF0b3J5IEJsb29kIFByZXNzdXJlIE1vbml0b3Jpbmcgb3IgSEJQTSBmb3IgZGlhZ25vc3RpYyBjb25maXJtYXRpb24ue3svY2FyZVRlYW19fScKICBlbHNlIGlmIENvbW1vbi4iQlAgSGlnaGx5IFZhcmlhYmxlIiB0aGVuICd7eyNwYXRpZW50fX1Zb3UgcmVjZW50bHkgaGF2ZSBoYWQgc29tZSA8c3Ryb25nPnZhcmlhdGlvbiBpbiB5b3VyIGJsb29kIHByZXNzdXJlIHJlYWRpbmdzPC9zdHJvbmc+LiBTb21ldGltZXMgdmFyaWF0aW9uIGluIGJsb29kIHByZXNzdXJlIGlzIGEgaGVhbHRoIHJpc2s7IHBsZWFzZSBjb250YWN0IHlvdXIgY2FyZSB0ZWFtLCBhcyB0aGV5IG1heSByZWNvbW1lbmQgYW1idWxhdG9yeSBibG9vZCBwcmVzc3VyZSBtb25pdG9yaW5nLnt7L3BhdGllbnR9fXt7I2NhcmVUZWFtfX1JbiBhZHVsdHMgd2l0aCBzdXNwZWN0ZWQgYmxvb2QgcHJlc3N1cmUgdmFyaWFiaWxpdHksIHVzZSBBbWJ1bGF0b3J5IEJsb29kIFByZXNzdXJlIE1vbml0b3JpbmcgdG8gYmV0dGVyIHVuZGVyc3RhbmQgcmlzay57ey9jYXJlVGVhbX19JwogIGVsc2UgJycKCmRlZmluZSAiSW5kaWNhdG9yIFN0YXR1cyI6CiAgaWYgbm90ICJJbiBQb3B1bGF0aW9uIiB0aGVuICJJbmZvIgogIGVsc2UgaWYgbm90IENvbW1vbi4iSGFzIEJQIFNldCIgdGhlbiAiSW5mbyIKICBlbHNlIGlmICJIVE4gU3RhZ2UgMiIgdGhlbiAiV2FybmluZyIKICBlbHNlIGlmICJDb25zaWRlciBIVE4gU3RhZ2UgMiIgdGhlbiAiSW5mbyIKICBlbHNlIGlmICJDb25zaWRlciBIVE4gU3RhZ2UgMSIgdGhlbiAiSW5mbyIKICBlbHNlIGlmICJQcmVzY3JpYmUgTW9uaXRvcmluZyB0byBDb25maXJtIEhUTiIgdGhlbiAiSW5mbyIKICBlbHNlIGlmIENvbW1vbi4iQlAgSGlnaGx5IFZhcmlhYmxlIiB0aGVuICJJbmZvIgogIGVsc2UgIkluZm8iCgpkZWZpbmUgIlN1Z2dlc3Rpb25zIjoKICBpZiBub3QgIkluIFBvcHVsYXRpb24iIHRoZW4gJ05vbmUnCiAgZWxzZSBpZiBub3QgQ29tbW9uLiJIYXMgQlAgU2V0IiB0aGVuICdbIHsgImlkIjogImVudGVyLWJwLXN1Z2dlc3Rpb24iLCAibGFiZWwiOiAiRW50ZXIgQmxvb2QgUHJlc3N1cmUiLCAidHlwZSI6ICJzdWdnZXN0aW9uLWxpbmsiLCAiYWN0aW9ucyI6IFt7ImxhYmVsIjoiQ2xpY2sgaGVyZSB0byBnbyB0byB0aGUgSG9tZSBCbG9vZCBQcmVzc3VyZSBlbnRyeSBwYWdlIiwgInVybCI6Ii9icC1yZWFkaW5ncyJ9XSB9IF0nCiAgZWxzZSBpZiAiSFROIFN0YWdlIDIiIHRoZW4gJ1sgeyAiaWQiOiAiY29udGFjdC1zdWdnZXN0aW9uIiwgImxhYmVsIjogIkNvbnRhY3QgY2FyZSB0ZWFtIiwgInR5cGUiOiAic3VnZ2VzdGlvbi1saW5rIiwgImFjdGlvbnMiOiBbeyJsYWJlbCI6IkNvbnRhY3QgeW91ciBjYXJlIHRlYW0gYWJvdXQgYSBoaWdoIGJsb29kIHByZXNzdXJlIGRpYWdub3NpcyIsICJ1cmwiOiIvY29udGFjdD90b2tlbj1zdXNwZWN0LWh0bi1zdGFnZTIifV0gfSBdJwogIGVsc2UgaWYgIkNvbnNpZGVyIEhUTiBTdGFnZSAyIiB0aGVuICdbIHsgImlkIjogImNvbnRhY3Qtc3VnZ2VzdGlvbiIsICJsYWJlbCI6ICJDb250YWN0IGNhcmUgdGVhbSIsICJ0eXBlIjogInN1Z2dlc3Rpb24tbGluayIsICJhY3Rpb25zIjogW3sibGFiZWwiOiJDb250YWN0IHlvdXIgY2FyZSB0ZWFtIGFib3V0IGEgaGlnaCBibG9vZCBwcmVzc3VyZSBkaWFnbm9zaXMiLCAidXJsIjoiL2NvbnRhY3Q/dG9rZW49cG9zc2libGUtaHRuLXN0YWdlMiJ9XSB9IF0nCiAgZWxzZSBpZiAiQ29uc2lkZXIgSFROIFN0YWdlIDEiIHRoZW4gJ1sgeyAiaWQiOiAiY29udGFjdC1zdWdnZXN0aW9uIiwgImxhYmVsIjogIkNvbnRhY3QgY2FyZSB0ZWFtIiwgInR5cGUiOiAic3VnZ2VzdGlvbi1saW5rIiwgImFjdGlvbnMiOiBbeyJsYWJlbCI6IkNvbnRhY3QgeW91ciBjYXJlIHRlYW0gYWJvdXQgYSBoaWdoIGJsb29kIHByZXNzdXJlIGRpYWdub3NpcyIsICJ1cmwiOiIvY29udGFjdD90b2tlbj1wb3NzaWJsZS1odG4tc3RhZ2UxIn1dIH0gXScKICBlbHNlIGlmICJQcmVzY3JpYmUgTW9uaXRvcmluZyB0byBDb25maXJtIEhUTiIgdGhlbiAnWyB7ICJpZCI6ICJjb250YWN0LXN1Z2dlc3Rpb24iLCAibGFiZWwiOiAiQ29udGFjdCBjYXJlIHRlYW0iLCAidHlwZSI6ICJzdWdnZXN0aW9uLWxpbmsiLCAiYWN0aW9ucyI6IFt7ImxhYmVsIjoiQ29udGFjdCB5b3VyIGNhcmUgdGVhbSBhYm91dCBvdXQgb2Ygb2ZmaWNlIGJsb29kIHByZXNzdXJlIG1lYXN1cmVtZW50cyIsICJ1cmwiOiIvY29udGFjdD90b2tlbj1vZmZpY2UtYnBzIn1dIH0gXScKICBlbHNlIGlmIENvbW1vbi4iQlAgSGlnaGx5IFZhcmlhYmxlIiB0aGVuICdbIHsgImlkIjogImFtYnVsYXRvcnktc3VnZ2VzdGlvbiIsICJsYWJlbCI6ICJSZXF1ZXN0IEFtYnVsYXRvcnkgQmxvb2QgUHJlc3N1cmUiLCAidHlwZSI6ICJzdWdnZXN0aW9uLWxpbmsiLCAiYWN0aW9ucyI6IFt7ImxhYmVsIjoiQ2xpY2sgaGVyZSB0byByZXF1ZXN0IEFtYnVsYXRvcnkgQmxvb2QgUHJlc3N1cmUiLCAidXJsIjoiL2NvbnRhY3Q/dG9rZW49YW1idWxhdG9yeS1icHMifV0gfSBdJwogIGVsc2UgJycKCmRlZmluZSAiU2VsZWN0aW9uIEJlaGF2aW9yIjoKICBpZiBub3QgIkluIFBvcHVsYXRpb24iIHRoZW4gJ05vbmUnCiAgZWxzZSBpZiBub3QgQ29tbW9uLiJIYXMgQlAgU2V0IiB0aGVuICdhdC1tb3N0LW9uZScKICBlbHNlIGlmICJIVE4gU3RhZ2UgMiIgdGhlbiAnYXQtbW9zdC1vbmUnCiAgZWxzZSBpZiAiQ29uc2lkZXIgSFROIFN0YWdlIDIiIHRoZW4gJ2F0LW1vc3Qtb25lJwogIGVsc2UgaWYgIkNvbnNpZGVyIEhUTiBTdGFnZSAxIiB0aGVuICdhdC1tb3N0LW9uZScKICBlbHNlIGlmICJQcmVzY3JpYmUgTW9uaXRvcmluZyB0byBDb25maXJtIEhUTiIgdGhlbiAnYXQtbW9zdC1vbmUnCiAgZWxzZSBpZiBDb21tb24uIkJQIEhpZ2hseSBWYXJpYWJsZSIgdGhlbiAnYXQtbW9zdC1vbmUnCiAgZWxzZSAnYXQtbW9zdC1vbmUnCgpkZWZpbmUgIkxpbmtzIjoKICBpZiBub3QgIkluIFBvcHVsYXRpb24iIHRoZW4gJycKICBlbHNlIGlmIG5vdCBDb21tb24uIkhhcyBCUCBTZXQiIHRoZW4gJ1t7ImxhYmVsIjoiQ0RDOiBIb3cgdG8gbWVhc3VyZSBibG9vZCBwcmVzc3VyZSIsICJ1cmwiOiJodHRwczovL3d3dy5jZGMuZ292L2Jsb29kcHJlc3N1cmUvbWVhc3VyZS5odG0ifV0nCiAgZWxzZSBpZiAiSFROIFN0YWdlIDIiIHRoZW4gJ1t7ImxhYmVsIjoiQUhBOiBVbmRlcnN0YW5kaW5nIEhpZ2ggQmxvb2QgUHJlc3N1cmUgUmVhZGluZ3MiLCAidXJsIjoiaHR0cHM6Ly93d3cuaGVhcnQub3JnL2VuL2hlYWx0aC10b3BpY3MvaGlnaC1ibG9vZC1wcmVzc3VyZS91bmRlcnN0YW5kaW5nLWJsb29kLXByZXNzdXJlLXJlYWRpbmdzIn1dJwogIGVsc2UgaWYgIkNvbnNpZGVyIEhUTiBTdGFnZSAyIiB0aGVuICdbeyJsYWJlbCI6IkFIQTogVW5kZXJzdGFuZGluZyBIaWdoIEJsb29kIFByZXNzdXJlIFJlYWRpbmdzIiwgInVybCI6Imh0dHBzOi8vd3d3LmhlYXJ0Lm9yZy9lbi9oZWFsdGgtdG9waWNzL2hpZ2gtYmxvb2QtcHJlc3N1cmUvdW5kZXJzdGFuZGluZy1ibG9vZC1wcmVzc3VyZS1yZWFkaW5ncyJ9XScKICBlbHNlIGlmICJDb25zaWRlciBIVE4gU3RhZ2UgMSIgdGhlbiAnW3sibGFiZWwiOiJBSEE6IFVuZGVyc3RhbmRpbmcgSGlnaCBCbG9vZCBQcmVzc3VyZSBSZWFkaW5ncyIsICJ1cmwiOiJodHRwczovL3d3dy5oZWFydC5vcmcvZW4vaGVhbHRoLXRvcGljcy9oaWdoLWJsb29kLXByZXNzdXJlL3VuZGVyc3RhbmRpbmctYmxvb2QtcHJlc3N1cmUtcmVhZGluZ3MifV0nCiAgZWxzZSBpZiAiUHJlc2NyaWJlIE1vbml0b3JpbmcgdG8gQ29uZmlybSBIVE4iIHRoZW4gJ1t7ImxhYmVsIjoiQUhBOiBNb25pdG9yaW5nIHlvdXIgYmxvb2QgcHJlc3N1cmUgYXQgaG9tZSIsICJ1cmwiOiAiaHR0cHM6Ly93d3cuaGVhcnQub3JnL2VuL2hlYWx0aC10b3BpY3MvaGlnaC1ibG9vZC1wcmVzc3VyZS91bmRlcnN0YW5kaW5nLWJsb29kLXByZXNzdXJlLXJlYWRpbmdzL21vbml0b3JpbmcteW91ci1ibG9vZC1wcmVzc3VyZS1hdC1ob21lIn1dJwogIGVsc2UgaWYgQ29tbW9uLiJCUCBIaWdobHkgVmFyaWFibGUiIHRoZW4gJ1t7ImxhYmVsIjoiMjQtaG91ciBBbWJ1bGF0b3J5IEJsb29kIFByZXNzdXJlIE1vbml0b3JpbmciLCAidXJsIjoiaHR0cHM6Ly9teS5jbGV2ZWxhbmRjbGluaWMub3JnL2hlYWx0aC9kaWFnbm9zdGljcy8xNjMzMC0yNC1ob3VyLWFtYnVsYXRvcnktYmxvb2QtcHJlc3N1cmUtbW9uaXRvcmluZyJ9XScKICBlbHNlICcnCgpkZWZpbmUgIkV4Y2x1c2lvbiBSZWFzb24iOgogIGlmICJNZWV0cyBFeGNsdXNpb24gQ3JpdGVyaWEiIHRoZW4KICAgICgKICAgICAgJ1BhdGllbnQgd2FzIGV4Y2x1ZGVkIGZyb20gaW5pdGlhbCBkaWFnbm9zaXMgb2YgaHlwZXJ0ZW5zaW9uIGR1ZSB0byAnCiAgICAgICsgKAogICAgICAgICAgaWYgQ29tbW9uLiJQYXRpZW50IFVuZGVyIEFnZSAxOCIgdGhlbiAnYmVpbmcgdW5kZXIgdGhlIGFnZSBvZiAxOC4nCiAgICAgICAgICBlbHNlIGlmIENvbW1vbi4iUGF0aWVudCBPdmVyIEFnZSA4MCIgdGhlbiAnYmVpbmcgb3ZlciB0aGUgYWdlIG9mIDgwLicKICAgICAgICAgIGVsc2UgaWYgZXhpc3RzIENvbW1vbi4iQ29uZGl0aW9uIEluZGljYXRpbmcgRW5kIFN0YWdlIFJlbmFsIERpc2Vhc2UiIHRoZW4gJ2hhdmluZyBlbmQgc3RhZ2UgcmVuYWwgZGlzZWFzZS4nCiAgICAgICAgICBlbHNlIGlmIGV4aXN0cyBDb21tb24uIkNvbmRpdGlvbiBJbmRpY2F0aW5nIFByZWduYW5jeSIgdGhlbiAnYmVpbmcgcHJlZ25hbnQuJwogICAgICAgICAgZWxzZSBpZiBDb21tb24uIkhUTiBDcmlzaXMiIHRoZW4gJ2EgcmVjZW50IGhpZ2ggYmxvb2QgcHJlc3N1cmUgd2FybmluZy4nCiAgICAgICAgICBlbHNlICcnCiAgICAgICAgKQogICAgKQogIGVsc2UgJycKCi8vIElzIGxhc3QgQlAgc2V0IG9yIGFsbCBCUHMgYXZlcmFnZSA+IDE2MCBTQlA/CmRlZmluZSAiUGF0aWVudCBIYXMgSFROIFN0YWdlIDIgQlAiOgogIENvbW1vbi4iUGF0aWVudCBIYXMgUG90ZW50aWFsIEhUTiBTdGFnZSAyIEJQIgogICAgYW5kICgKICAgICAgICBDb21tb24uIkhUTiBTdGFnZSAyIEJQIFN5c3RvbGljIFNlY29uZCBUZXN0IihDb21tb24uIk1vc3QgUmVjZW50IEJQIFNldCIpIGlzIG5vdCBudWxsCiAgICAgICAgb3IgQ29tbW9uLiJIVE4gU3RhZ2UgMiBCUCBTeXN0b2xpYyBTZWNvbmQgVGVzdCIoQ29tbW9uLiJCbG9vZCBQcmVzc3VyZSBPYnNlcnZhdGlvbnMgZm9yIExhc3QgMiBZZWFycyIpIGlzIG5vdCBudWxsCiAgICApCgpkZWZpbmUgIkhUTiBTdGFnZSAyIjoKICAiSW4gUG9wdWxhdGlvbiIgYW5kICJQYXRpZW50IEhhcyBIVE4gU3RhZ2UgMiBCUCIKCmRlZmluZSAiQ29uc2lkZXIgSFROIFN0YWdlIDIiOgogICJJbiBQb3B1bGF0aW9uIiBhbmQgQ29tbW9uLiJQYXRpZW50IEhhcyBQb3RlbnRpYWwgSFROIFN0YWdlIDIgQlAiCiAgICAgIGFuZCBub3QgIlBhdGllbnQgSGFzIEhUTiBTdGFnZSAyIEJQIgoKLy8gSXMgbGFzdCBCUCBzZXQgQU5EIGFsbCBCUHMgYXZnID4gMTMwLzgwPwpkZWZpbmUgIkNvbnNpZGVyIEhUTiBTdGFnZSAxIjoKICAiSW4gUG9wdWxhdGlvbiIgYW5kICgKICAgIENvbW1vbi4iSFROIFN0YWdlIDEgQlAiKENvbW1vbi4iTW9zdCBSZWNlbnQgQlAgU2V0IikgaXMgbm90IG51bGwKICAgIGFuZCBDb21tb24uIkhUTiBTdGFnZSAxIEJQIihDb21tb24uIkJsb29kIFByZXNzdXJlIE9ic2VydmF0aW9ucyBmb3IgTGFzdCAyIFllYXJzIikgaXMgbm90IG51bGwKICApCgpkZWZpbmUgIlByZXNjcmliZSBNb25pdG9yaW5nIHRvIENvbmZpcm0gSFROIjoKICAiSW4gUG9wdWxhdGlvbiIgYW5kIENvbW1vbi4iUGF0aWVudCBIYXMgUG90ZW50aWFsIEhUTiBTdGFnZSAxIEJQIiBhbmQgbm90ICJDb25zaWRlciBIVE4gU3RhZ2UgMSIKCi8qIFRFU1RTICovCmRlZmluZSAiVGVzdCBQYXRpZW50IEFnZSBvbiBCUCBSZWFkaW5nIjoKICBBZ2VJblllYXJzQXQoc3RhcnQgb2YgQ29tbW9uLiJOb3JtYWxpemUgSW50ZXJ2YWwiKENvbW1vbi4iTW9zdCBSZWNlbnQgQlAgUmVhZGluZyIuZWZmZWN0aXZlKSkKCmRlZmluZSAiVGVzdCBDb3VudCBBbGwgQlAiOgogIENvdW50KENvbW1vbi4iQmxvb2QgUHJlc3N1cmUgT2JzZXJ2YXRpb25zIGZvciBMYXN0IDIgWWVhcnMiKQoKZGVmaW5lICJUZXN0IE1vc3QgUmVjZW50IEJQIjoKICBDb21tb24uIk1vc3QgUmVjZW50IEJQIFJlYWRpbmciIEJQCiAgICByZXR1cm4gVHVwbGUgewogICAgICAiSUQiOiBCUC5pZCwKICAgICAgIkRhdGUiOiBCUC5lZmZlY3RpdmUuZW5kLAogICAgICAiU3lzdG9saWMiOiBzaW5nbGV0b24gZnJvbSAoQlAuY29tcG9uZW50IEMgd2hlcmUgQy5jb2RlIGluICJTeXN0b2xpYyBibG9vZCBwcmVzc3VyZSIpLnZhbHVlLnZhbHVlLAogICAgICAiRGlhc3RvbGljIjogc2luZ2xldG9uIGZyb20gKEJQLmNvbXBvbmVudCBDIHdoZXJlIEMuY29kZSBpbiAiRGlhc3RvbGljIEJsb29kIFByZXNzdXJlIikudmFsdWUudmFsdWUKICAgIH0KCmRlZmluZSAiVGVzdCBHZXQgQWxsIEJQIE9ic2VydmF0aW9uIFJlc291cmNlcyI6CiAgKENvbW1vbi4iQmxvb2QgUHJlc3N1cmUgT2JzZXJ2YXRpb25zIiBCUCBzb3J0IGJ5IENvYWxlc2NlKGlzc3VlZCwgc3RhcnQgb2YgQ29tbW9uLiJOb3JtYWxpemUgSW50ZXJ2YWwiKGVmZmVjdGl2ZSkpKSBCUAogICAgcmV0dXJuIFR1cGxlIHsKICAgICAgIk9ic2VydmF0aW9uIElEIjogQlAuaWQKICAgICAgfQoKZGVmaW5lICJUZXN0IEdldCBNb3N0IFJlY2VudCBCUCBTZXQiOgogIENvbW1vbi4iTW9zdCBSZWNlbnQgQlAgU2V0IiBCUFNldAogICAgcmV0dXJuIFR1cGxlIHsKICAgICAgIk9ic2VydmF0aW9uIElEIjogQlBTZXQuaWQsCiAgICAgICJFbmNvdW50ZXIgUmVmZXJlbmNlIjogQlBTZXQuZW5jb3VudGVyLnJlZmVyZW5jZQogICAgICB9CgpkZWZpbmUgIlRlc3QgQWxsIEJQIExhc3QgMiBZZWFycyI6CiAgQ29tbW9uLiJCbG9vZCBQcmVzc3VyZSBPYnNlcnZhdGlvbnMgZm9yIExhc3QgMiBZZWFycyIgQlBzCiAgICByZXR1cm4gVHVwbGUgewogICAgICAiT2JzZXJ2YXRpb24gSUQiOiBCUHMuaWQsCiAgICAgICJEYXRlIjogQlBzLmVmZmVjdGl2ZS5lbmQsCiAgICAgICJFbmNvdW50ZXIgUmVmZXJlbmNlIjogQlBzLmVuY291bnRlci5yZWZlcmVuY2UKICAgICAgfQoKZGVmaW5lICJUZXN0IEdldCBBdmVyYWdlIEFsbCBCUCBMYXN0IDIgWWVhcnMiOgogIENvbW1vbi4iQXZnIEJQIihDb21tb24uIkJsb29kIFByZXNzdXJlIE9ic2VydmF0aW9ucyBmb3IgTGFzdCAyIFllYXJzIikKCmRlZmluZSAiVGVzdCBHZXQgQXZlcmFnZSBNb3N0IFJlY2VudCBCUCBTZXQiOgogIENvbW1vbi4iQXZnIEJQIihDb21tb24uIk1vc3QgUmVjZW50IEJQIFNldCIpCgpkZWZpbmUgIlRlc3QgR2V0IEFsbCBCUCBTQlAgQ29lZmZpY2llbnQgVmFyaWFiaWxpdHkiOgogIENvbW1vbi4iU3lzdG9saWMgQlAgVmFyaWFiaWxpdHkiKENvbW1vbi4iQmxvb2QgUHJlc3N1cmUgT2JzZXJ2YXRpb25zIGZvciBMYXN0IDIgWWVhcnMiKS52YWx1ZQo="
  } ]
}